name: Conditional Execution Example

on:
  workflow_dispatch:
  push:
    branches:
      - main
      - '**'

jobs:
  demo:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v2

      # Here's a demo step that fails intentionally. You can replace it with your actual steps.
      - name: Run some step
        run: |
          echo "This step will fail"
          exit 1

  on_failure:
    needs: demo
    if: ${{always() && steps.demo.conclusion == 'failure'}}
    runs-on: ubuntu-latest
    steps:
      - name: Run on failure
        run: |
          echo "Demo job has failed. Running steps for failure case."
